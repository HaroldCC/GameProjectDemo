add_requires("spdlog", "doctest", "toml++", "asio")

target("Common")
    set_kind("static")
    add_packages("spdlog", "doctest", "toml++", "asio")
    -- add_cxflags("/P")
    add_includedirs("src/Common/")
    add_files("src/Common/*.ixx", "src/net/*.ixx")
    ExterRule()

target("tests")
    set_kind("binary")
    add_packages("spdlog", "doctest", "toml++", "asio")
    add_deps("Common")
    add_headerfiles("src/tests/*.h")
    add_files("src/tests/*.cpp")
    ExterRule()
